210f84aae6081a5c0772b29719620aff
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const fastify_1 = __importDefault(require("fastify"));
const mysql_adapter_1 = require("./adapters/mysql-adapter");
const public_1 = __importDefault(require("./routes/public/public"));
const knex_plugin_1 = __importDefault(require("./plugins/knex-plugin"));
const internal_1 = __importDefault(require("./routes/internal/internal"));
const cors_1 = __importDefault(require("@fastify/cors"));
const fastify_cron_1 = __importDefault(require("fastify-cron"));
const cron_job_1 = __importDefault(require("./jobs/cron-job"));
const f = (0, fastify_1.default)();
exports.default = f
    .register(cors_1.default, {
    origin: "*",
    allowedHeaders: "GET",
})
    .register(knex_plugin_1.default, (0, mysql_adapter_1.getConfig)())
    .register(fastify_cron_1.default, { jobs: [] })
    .register(mysql_adapter_1.registerMysqlDatabase)
    .register(internal_1.default, { prefix: "internal" })
    .register(public_1.default, { prefix: "public" })
    .register(cron_job_1.default);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpbW5hY2lzY2lvbmlzL2dpdC9wZXJzb25hbC9zZWItZXhjaGFuZ2UtcmF0ZXMvc3JjL2FwcC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLHNEQUE4QjtBQUM5Qiw0REFBNEU7QUFDNUUsb0VBQTBEO0FBQzFELHdFQUErQztBQUMvQywwRUFBZ0U7QUFDaEUseURBQWlDO0FBQ2pDLGdFQUF1QztBQUN2QywrREFBNkM7QUFFN0MsTUFBTSxDQUFDLEdBQUcsSUFBQSxpQkFBTyxHQUFFLENBQUE7QUFFbkIsa0JBQWUsQ0FBQztLQUNiLFFBQVEsQ0FBQyxjQUFJLEVBQUU7SUFDZCxNQUFNLEVBQUUsR0FBRztJQUNYLGNBQWMsRUFBRSxLQUFLO0NBQ3RCLENBQUM7S0FDRCxRQUFRLENBQUMscUJBQVUsRUFBRSxJQUFBLHlCQUFTLEdBQUUsQ0FBQztLQUNqQyxRQUFRLENBQUMsc0JBQVcsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQztLQUNuQyxRQUFRLENBQUMscUNBQXFCLENBQUM7S0FDL0IsUUFBUSxDQUFDLGtCQUFzQixFQUFFLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxDQUFDO0tBQ3hELFFBQVEsQ0FBQyxnQkFBb0IsRUFBRSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsQ0FBQztLQUNwRCxRQUFRLENBQUMsa0JBQWMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9raW1uYWNpc2Npb25pcy9naXQvcGVyc29uYWwvc2ViLWV4Y2hhbmdlLXJhdGVzL3NyYy9hcHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZhc3RpZnkgZnJvbSBcImZhc3RpZnlcIjtcbmltcG9ydCB7IGdldENvbmZpZywgcmVnaXN0ZXJNeXNxbERhdGFiYXNlIH0gZnJvbSBcIi4vYWRhcHRlcnMvbXlzcWwtYWRhcHRlclwiO1xuaW1wb3J0IHJlZ2lzdGVyUHVibGljUm91dGVzIGZyb20gXCIuL3JvdXRlcy9wdWJsaWMvcHVibGljXCI7XG5pbXBvcnQga25leFBsdWdpbiBmcm9tIFwiLi9wbHVnaW5zL2tuZXgtcGx1Z2luXCI7XG5pbXBvcnQgcmVnaXN0ZXJJbnRlcm5hbFJvdXRlcyBmcm9tIFwiLi9yb3V0ZXMvaW50ZXJuYWwvaW50ZXJuYWxcIjtcbmltcG9ydCBjb3JzIGZyb20gXCJAZmFzdGlmeS9jb3JzXCI7XG5pbXBvcnQgZmFzdGlmeUNyb24gZnJvbSBcImZhc3RpZnktY3JvblwiO1xuaW1wb3J0IGNyZWF0ZUNyb25Kb2JzIGZyb20gXCIuL2pvYnMvY3Jvbi1qb2JcIjtcblxuY29uc3QgZiA9IGZhc3RpZnkoKVxuXG5leHBvcnQgZGVmYXVsdCBmXG4gIC5yZWdpc3Rlcihjb3JzLCB7XG4gICAgb3JpZ2luOiBcIipcIixcbiAgICBhbGxvd2VkSGVhZGVyczogXCJHRVRcIixcbiAgfSlcbiAgLnJlZ2lzdGVyKGtuZXhQbHVnaW4sIGdldENvbmZpZygpKVxuICAucmVnaXN0ZXIoZmFzdGlmeUNyb24sIHsgam9iczogW10gfSlcbiAgLnJlZ2lzdGVyKHJlZ2lzdGVyTXlzcWxEYXRhYmFzZSlcbiAgLnJlZ2lzdGVyKHJlZ2lzdGVySW50ZXJuYWxSb3V0ZXMsIHsgcHJlZml4OiBcImludGVybmFsXCIgfSlcbiAgLnJlZ2lzdGVyKHJlZ2lzdGVyUHVibGljUm91dGVzLCB7IHByZWZpeDogXCJwdWJsaWNcIiB9KVxuICAucmVnaXN0ZXIoY3JlYXRlQ3JvbkpvYnMpO1xuIl0sInZlcnNpb24iOjN9