f38f923b095adfeb169e330c8da00114
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDefaultKnexPluginParams = exports.stopTestEnv = exports.startTestEnv = void 0;
let app;
async function startTestEnv() {
    const app = require('../src/app').default;
    await app.ready();
    return app;
}
exports.startTestEnv = startTestEnv;
async function stopTestEnv() {
    await app?.close();
}
exports.stopTestEnv = stopTestEnv;
function getDefaultKnexPluginParams() {
    return {
        raw: jest.fn(),
        destroy: jest.fn(),
        migrate: {
            latest: jest.fn(),
        },
        table: {},
    };
}
exports.getDefaultKnexPluginParams = getDefaultKnexPluginParams;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpbW5hY2lzY2lvbmlzL2dpdC9wZXJzb25hbC9zZWItZXhjaGFuZ2UtcmF0ZXMvdGVzdC9oZWxwZXIudHMiLCJtYXBwaW5ncyI6Ijs7O0FBRUEsSUFBSSxHQUFvQixDQUFDO0FBRWxCLEtBQUssVUFBVSxZQUFZO0lBQ2pDLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxPQUFPLENBQUM7SUFFMUMsTUFBTSxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUM7SUFFbEIsT0FBTyxHQUFHLENBQUM7QUFDWixDQUFDO0FBTkQsb0NBTUM7QUFFTSxLQUFLLFVBQVUsV0FBVztJQUM3QixNQUFNLEdBQUcsRUFBRSxLQUFLLEVBQUUsQ0FBQztBQUN2QixDQUFDO0FBRkQsa0NBRUM7QUFFRCxTQUFnQiwwQkFBMEI7SUFDekMsT0FBTztRQUNOLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ1IsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEIsT0FBTyxFQUFFO1lBQ0wsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7U0FDcEI7UUFDUCxLQUFLLEVBQUUsRUFBRTtLQUNULENBQUE7QUFDRixDQUFDO0FBVEQsZ0VBU0MiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2tpbW5hY2lzY2lvbmlzL2dpdC9wZXJzb25hbC9zZWItZXhjaGFuZ2UtcmF0ZXMvdGVzdC9oZWxwZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFzdGlmeUluc3RhbmNlIH0gZnJvbSAnZmFzdGlmeSc7XG5cbmxldCBhcHA6IEZhc3RpZnlJbnN0YW5jZTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0YXJ0VGVzdEVudigpOiBQcm9taXNlPEZhc3RpZnlJbnN0YW5jZT4ge1xuXHRjb25zdCBhcHAgPSByZXF1aXJlKCcuLi9zcmMvYXBwJykuZGVmYXVsdDtcblxuXHRhd2FpdCBhcHAucmVhZHkoKTtcblxuXHRyZXR1cm4gYXBwO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RvcFRlc3RFbnYoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgYXBwPy5jbG9zZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEtuZXhQbHVnaW5QYXJhbXMoKSB7XG5cdHJldHVybiB7XG5cdFx0cmF3OiBqZXN0LmZuKCksXG4gICAgICAgIGRlc3Ryb3k6IGplc3QuZm4oKSxcbiAgICAgICAgbWlncmF0ZToge1xuICAgICAgICAgICAgbGF0ZXN0OiBqZXN0LmZuKCksXG4gICAgICAgIH0sXG5cdFx0dGFibGU6IHt9LFxuXHR9XG59Il0sInZlcnNpb24iOjN9