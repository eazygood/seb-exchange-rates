ac1bd6ca94e5e2c99b23db1357e119b4
// const knex = jest.fn();
const mysql = jest.fn();
const Knex = require('knex');
const fp = require('fastify-plugin');

Knex.knex = jest.mock();

const knexPlugin = async (fastify, options) => {
    const knex = { 
        raw: jest.fn(),
        destroy: jest.fn(),
    }

    fastify.decorate('knex', knex);
}

jest.mock('./src/plugins/knex-plugin', (() => {
  return knexPlugin;
}));

// knex = {
//     raw: jest.fn().mockReturnThis(),
//     destroy: jest.fn().mockReturnThis(),
// }
