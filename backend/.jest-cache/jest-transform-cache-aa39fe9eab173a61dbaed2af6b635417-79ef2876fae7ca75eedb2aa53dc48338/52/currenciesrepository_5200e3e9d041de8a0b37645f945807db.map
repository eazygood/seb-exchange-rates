{"file":"/Users/kimnaciscionis/git/personal/seb-exchange-rates/src/repositories/currencies-repository.ts","mappings":";;;AACA,4CAAmD;AAG5C,MAAM,cAAc,GAAG,KAAK,EACjC,GAAoB,EACpB,UAAoC,EACrB,EAAE;IACjB,MAAM,GAAG,CAAC,IAAI;SACX,KAAK,CAAC,+BAAmB,CAAC;SAC1B,MAAM,CAAC,UAAU,CAAC;SAClB,UAAU,CAAC,UAAU,CAAC;SACtB,MAAM,EAAE,CAAC;AACd,CAAC,CAAC;AATW,QAAA,cAAc,kBASzB;AAEK,MAAM,aAAa,GAAG,KAAK,EAChC,GAAoB,EACC,EAAE;IACvB,MAAM,IAAI,GAAG,MAAM,GAAG,CAAC,IAAI;SACxB,KAAK,CAAC,+BAAmB,CAAC;SAC1B,MAAM,CAAC,UAAU,CAAC,CAAC;IAEtB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAElB,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA;AACtC,CAAC,CAAC;AAVW,QAAA,aAAa,iBAUxB","names":[],"sources":["/Users/kimnaciscionis/git/personal/seb-exchange-rates/src/repositories/currencies-repository.ts"],"sourcesContent":["import { FastifyInstance } from \"fastify\";\nimport { DB_CURRENCIES_TABLE } from \"../constants\";\nimport { Currency } from \"../entities/currencies\";\n\nexport const saveCurrencies = async (\n  app: FastifyInstance,\n  currencies: { currency: Currency }[],\n): Promise<void> => {\n  await app.knex\n    .table(DB_CURRENCIES_TABLE)\n    .insert(currencies)\n    .onConflict(\"currency\")\n    .ignore();\n};\n\nexport const getCurrencies = async (\n  app: FastifyInstance,\n): Promise<Currency[]> => {\n  const rows = await app.knex\n    .table(DB_CURRENCIES_TABLE)\n    .select('currency');\n\n  console.log(rows);\n\n  return rows.map(row => row.currency)\n};\n"],"version":3}